@inherits RocketCatalog.Components.RocketCatalogTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketCatalog.Components;
@using DNNrocketAPI.Components;

@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocketModules/RocketCatalog/App_LocalResources/")


@{
    var remoteParam = (RemoteLimpet)Model.GetDataObject("remoteparam");
    // We need the moduleid, the first remote call will have the moduleid, subsequent call need to have the remote module passed by the s-field
    var moduleId = Model.ModuleId;
    var tabId = Model.TabId;
    if (remoteParam != null)
    {
        moduleId = remoteParam.ModuleId;
        tabId = remoteParam.TabId;
    }

}

<header class="w3-row w3-top" style="z-index: 99;">

    <div class="w3-bar w3-card searchdata  w3-white w3-padding">
        <div class="w3-bar-item w3-col m4 " style='width: 360px'>
            <div class="w3-bar">
                <input id="searchcategoryid" type="hidden" value="" class="simplisity_sessionfield" />
                @TextBox(new SimplisityInfo(), "genxml/textbox/searchtext", "class='w3-bar-item w3-input w3-border w3-light-grey simplisity_sessionfield actionentrykey'  autocomplete='off' ")
                <div class="w3-bar-item w3-button w3-border w3-orange clearsearch" style="display:none;"><span class="w3-padding">@ButtonIcon(ButtonTypes.cancelsearch)</span></div>
                <div class="w3-bar-item w3-button w3-border w3-theme-d3 dosearch" onclick="$('#searchcategoryid').val('0'); $('.triggersearch').trigger('click');"><span class="w3-padding">@ButtonIcon(ButtonTypes.search)</span> </div>
            </div>
        </div>

        <div class="w3-bar-item w3-col m2 w3-right w3-hide-small w3-margin-left" style="width: 100px">
            @DropDownList(new SimplisityInfo(), "genxml/hidden/pagesize", "8,16,32,64,128", "8,16,32,64,128", "class='w3-input w3-border w3-light-grey simplisity_sessionfield simplisity_change ' s-before='sendRemoteParams" + moduleId + "' s-systemkey='rocketcatalog' s-sessionfield='#searchtext,#pagesize,#orderbyref' s-return='#simplisitymodulewrapper" + moduleId + "'  s-cmd='rocketcatalog_public' s-post='.searchdata'  s-fields='{\"systemkey\":\"rocketcatalog\"}' title='" + @ResourceKey("DNNrocket.pagesize", remoteParam.CultureCode) + "'", "32")
        </div>
    </div>

    <!-- Element to trigger simplisity call from JS event -->
    <span class="w3-hide simplisity_click triggersearch" s-before="sendRemoteParams@(moduleId)" s-sessionfield='#searchtext,#pagesize,#searchcategoryid' s-cmd="rocketcatalog_public" s-post=".searchdata" s-return='#simplisitymodulewrapper@(moduleId)' s-fields='{"systemkey":"rocketcatalog"}'></span>

</header>
